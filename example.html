<html>
<body>
<script type="module">
    import {
        fnapp,
        fnstate,
        fnlink,
        div,
        input,
        router,
        route,
        goTo,
        form,
        h3,
        img,
        routeSwitch
    } from './src/index.js'
    import { button } from './docs/fntags.js'

    const appState = fnstate( { currentUser: null } )

    const nav = div(
        fnlink( { to: '/' }, 'root' ),
        fnlink( { to: '/hello' }, 'hello' ),
        fnlink( { to: '/goodbye' }, 'goodbye' )
    )

    let navInput = input( { placeholder: 'navigate to' } )
    fnapp( document.body,
           router(
               nav,
               form( {
                         style: 'display: inline-block',
                         onsubmit: (e) => {
                             e.preventDefault()
                             goTo(navInput.value.startsWith( '/' ) ? navInput.value : '/' + navInput.value)
                         }
                     },
                     navInput,
                     button( { type: 'submit' }, 'go' )
               ),
               routeSwitch(
                   route( { fnpath: '/', absolute: true },
                          'rooooot'
                   ),
                   route( { fnpath: '/hello' },
                          'hello page'
                   ),
                   route( { fnpath: '/goodbye' },
                          'goodbye page'
                   ),
                   route({fnpath: '/.*'},
                         h3("404 Page not found"),
                         div(img({src:'http://placekitten.com/500/500'}))
                   )
               )
           )
    )

    setTimeout( () => {
                    console.log( 'hello' )
                    appState.currentUser = { name: 'fntags' }
                },
                2000 )

</script>
</body>
</html>