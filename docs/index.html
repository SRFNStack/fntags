<html lang="en">
<head>
    <title>fntags framework example</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>
<body>
<script type="module">
    import { fnstate, fnbind, div, p, pre, code, br, button } from './fntags.js'
    import tabs from './tabs.js'
    import greeting from './greeting.js'
    import myForm from './myForm.js'

    const foo = ( aFoo ) =>
        div( { style: 'background: darkcyan' },
             'One of my foos: ',
             aFoo.foo
        )

    let appState = fnstate( {
                                currentUser: {
                                    name: 'fntags'
                                },
                                myFoos: [ { foo: 'Hannibal' }, { foo: 'Face(man)' }, { foo: 'Howling Mad' }, { foo: 'B.A.' } ]
                            } )
    document.body.append(
        div( { id: 'App' },
             tabs(
                 {
                     containerAttrs: {},
                     tabs: [
                         { title: 'Hello', content: 'world' },
                         { title: 'Goodbye', content: 'earth' },
                         { title: 'Hasta la vista', content: 'baby' }
                     ]
                 }
             ),
             greeting( appState ),
             myForm( appState, {
                 message: 'First form',
                 fontSize: '20px',
                 stateColor: 'blue',
                 inputStateColor: 'lime'
             } ),
             p( 'This is an example of some static text',
                div(
                    div(
                        div( { style: 'color: limegreen' },
                             div(
                                 fnbind( appState, () => `nested divs with bound state ${appState.currentUser.name}` )
                             )
                        )
                    )
                ),
                pre( code( { class: 'lang-js' }, 'console.log("code tags!")' ) )
             ),
             myForm( appState, {
                 message: 'Second form',
                 fontSize: '24px',
                 stateColor: 'pink',
                 inputStateColor: 'purple'
             } ),
             br(), br(),
             button( { onclick: () => appState.myFoos = appState.myFoos.concat( { foo: 'foo' } ) },
                     'More foos'
             ),
             button( { onclick: () => appState.myFoos = appState.myFoos.slice( 0, -1 ) },
                     'Less foos'
             ),
             fnbind( appState, () => div( ...appState.myFoos.map( foo ) ) )
        )
    )
    setTimeout( ( ( ast ) => () => {
                    console.log( 'hello' )
                    ast.loaded = true
                } )( appState ),
                2000 )
</script>
</body>
</html>