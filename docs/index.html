<html lang="en">
<head>
    <title>fntags framework example</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>
<body>
<script type="module">
    import { fnstate, fnbind, div, p, pre, code, br, button, span } from './fntags.js'
    import tabs from './tabs.js'
    import greeting from './greeting.js'
    import myForm from './myForm.js'

    const foo = ( aFoo ) =>
        div( { style: 'background: darkcyan' },
             'One of my foos: ',
             aFoo.foo
        )

    let appState = fnstate( {
                                currentUser: {
                                    name: 'fntags'
                                },
                                myFoos: [ { foo: 'Hannibal' }, { foo: 'Face(man)' }, { foo: 'Howling Mad' }, { foo: 'B.A.' } ]
                            } )
    document.body.append(
        div( { id: 'App' },
             tabs(
                 div({title: "Wello"}, span("Horld")),
                 div({title: "Goodbye"}, span("Earth")),
                 div({title: "Hasta la vista"}, span("Baby"))
             ),
             greeting( appState ),
             tabs( myForm( appState, {
                       message: 'First form',
                       fontSize: '24px',
                       stateColor: 'blue',
                       inputStateColor: 'lime',
                       title: 'First Form'
                   } )
                 ,
                   myForm( appState, {
                       message: 'Second form',
                       fontSize: '16px',
                       stateColor: 'pink',
                       inputStateColor: 'purple',
                       title: 'Second Form'
                   } )
             ),
             p( 'This is static text',
                div(
                    div(
                        div( { style: 'color: limegreen' },
                             div(
                                 fnbind( appState,
                                         () => `These are nested divs with bound state ${appState.currentUser.name}` )
                             )
                        )
                    )
                ),
                pre( code( { class: 'lang-js' }, 'alert("fntags!")' ) )
             ),
             br(), br(),
             button( { onclick: () => appState.myFoos = appState.myFoos.concat( { foo: 'foo' } ) },
                     'More foos'
             ),
             button( { onclick: () => appState.myFoos = appState.myFoos.slice( 0, -1 ) },
                     'Less foos'
             ),
             fnbind( appState, () => div( ...appState.myFoos.map( foo ) ) )
        )
    )
    setTimeout( ( ( ast ) => () => {
                    console.log( 'hello' )
                    ast.loaded = true
                } )( appState ),
                2000 )
</script>
</body>
</html>